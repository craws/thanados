{% extends "layout.html" %}
{% block content %}

    <link href="/static/css/dashboard.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/vendor/node_modules/jqcloud2/dist/jqcloud.min.css"/>
    <script src="/static/vendor/node_modules/jqcloud2/dist/jqcloud.min.js"></script>
    <script src="/static/vendor/node_modules/vis-network/dist/vis-network.min.js"></script>
    <script src="/static/vendor/node_modules/chart.js/dist/Chart.bundle.min.js"></script>
    <script src="/static/vendor/node_modules/chartjs-plugin-colorschemes/dist/chartjs-plugin-colorschemes.min.js"></script>
    <script src="/static/vendor/node_modules/d3/dist/d3.min.js"></script>

    <script>
        mynetwork = {{ network|tojson }};
        wordcloud = {{ wordcloud|tojson }};
        jsonmysite = {{ mysitejson|tojson }};
        findBubble = {{ findBubble|tojson }};
    </script>

    <a id="sidebarCollapse" class="btn btn-secondary btn-sm" role="button"
       title="Toggle sidebar"
       data-placement="left"><i id="toggleIcon" class="fas fa-chevron-left"></i></a>

    <div class="wrapper">

    <nav id="sidebar">

        <div class="sidebar-header">
            <h3 class="p-0">Dashboard</h3>
        </div>

        <ul class="list-unstyled components">

            <li>
                <a onclick="loadOverview()">
                    <i class="fas fa-info-circle"></i>
                    Overview
                </a>
            </li>

            <li>
                <a onclick="loadWordCloud()">
                    <i class="fas fa-cloud"></i>
                    Wordcloud
                </a>
            </li>

            <li>
                <a onclick="loadnetwork()">
                    <i class="fas fa-project-diagram"></i>
                    Network
                </a>
            </li>

            <li>
                <a href="#viewSubmenu"
                   onclick="document.getElementById('entity').scrollIntoView()"
                   data-toggle="collapse" aria-expanded="false"
                   class="dropdown-toggle">
                    <i class="fas fa-book-dead"></i>
                    Detailed View
                </a>
                <ul class="collapse list-unstyled" id="viewSubmenu">
                    <li>
                        <a href="#subunits">List of Subunits</a>
                    </li>
                    <li>
                        <a href="#catalogue">Catalogue</a>
                    </li>
                    <li>
                        <a href="#humanremains">Osteology</a>
                    </li>
                    <li>
                        <a href="#metadata">Metadata</a>
                    </li>
                </ul>
            </li>

        </ul>

    </nav>

    <!-- Page Content  -->
    <div id="mycontent">
        <h2 class="mb-3">{{ entity.name }}</h2>

        <div class="db-element d-none" id="overview-wrapper">
            <h5>Overview</h5>
            <div class="card shadow-sm dash-card">
                <div class="card-body">
                    <div id="counters" class="row text-center pt-3"></div>
                </div>
            </div>
            <div id="overviewCharts" class="card shadow-sm dash-card">
                <div class="card-body">
                    <div class="row">
                        <div id="gravetypes-chart-container" class="col-xl-6">
                            <canvas class="chartcontainer" id="gravetypes-chart"></canvas>
                        </div>
                        <div id="burialtypes-chart-container" class="col-xl-6">
                            <canvas class="chartcontainer" id="burialtypes-chart"></canvas>
                        </div>
                        <div id="gravegoods-chart-container" class="col-xl-6">
                            <canvas class="chartcontainer" id="gravegoods-chart"></canvas>
                        </div>
                        <div id="bubblecard" class="col-xl-6">
                            <div class="chartcontainer overflow-auto text-center">
                                <div class="row"><span class="mx-auto charttitle">Find distribution</span></div>
                                <svg id="bubble" class="row border rounded mx-auto"></svg>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <div class="db-element d-none" id="wordcloud-wrapper">
            <h5>Wordcloud</h5>
            <div class="card shadow-sm dash-card">
                <div id="wordcloud" class="card-body" style="height: 70vh">

                </div>
            </div>
        </div>

        <div class="db-element d-none" id="network-wrapper">
            <h5>Network</h5>
            <div class="card shadow-sm dash-card" style="height: 70vh">
                    <span class="mt-5 text-center" id="loadingspinner">
                                <div class="spinner-border text-primary"
                                     style="width: 1.3em; height: 1.3em;" role="status">
                                </div>
                    Loading network
                    </span>
                <div id="network" class="card-body p-0">

                </div>
            </div>
        </div>
    </div>


    <script src="/static/js/dashboard.js"></script>

{% endblock %}
</div>