{"version":3,"file":"msftLodLoaderPlugin.js","sourceRoot":"","sources":["../../../../../sourceES6/viewer/src/loader/plugins/msftLodLoaderPlugin.ts"],"names":[],"mappings":"AAMA;;GAEG;AACH;IAAA;IAeA,CAAC;IAXU,oCAAM,GAAb,UAAc,MAAoD,EAAE,KAAkB;QAClF,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;IACxB,CAAC;IAEM,+CAAiB,GAAxB,UAAyB,SAA+B;QACpD,IAAI,SAAS,CAAC,IAAI,KAAK,UAAU,IAAI,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,mBAAmB,EAAE;YAChF,IAAM,QAAQ,GAAG,SAA2B,CAAC;YAC7C,QAAQ,CAAC,OAAO,GAAG,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,mBAAmB,CAAC,kBAAkB,CAAC;YACtF,QAAQ,CAAC,aAAa,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,mBAAmB,CAAC,aAAa,IAAI,MAAM,CAAC,SAAS,CAAC;SAC5G;IACL,CAAC;IACL,0BAAC;AAAD,CAAC,AAfD,IAeC","sourcesContent":["import { ISceneLoaderPlugin, ISceneLoaderPluginAsync } from '@babylonjs/core/Loading/sceneLoader';\r\nimport { IGLTFLoaderExtension } from '@babylonjs/loaders/glTF/2.0/glTFLoaderExtension';\r\nimport { GLTF2 } from '@babylonjs/loaders/glTF/index';\r\nimport { ViewerModel } from '../../model/viewerModel';\r\nimport { ILoaderPlugin } from './loaderPlugin';\r\n\r\n/**\r\n * A loder plugin to use MSFT_lod extension correctly (glTF)\r\n */\r\nexport class MSFTLodLoaderPlugin implements ILoaderPlugin {\r\n\r\n    private _model: ViewerModel;\r\n\r\n    public onInit(loader: ISceneLoaderPlugin | ISceneLoaderPluginAsync, model: ViewerModel) {\r\n        this._model = model;\r\n    }\r\n\r\n    public onExtensionLoaded(extension: IGLTFLoaderExtension) {\r\n        if (extension.name === \"MSFT_lod\" && this._model.configuration.loaderConfiguration) {\r\n            const MSFT_lod = extension as GLTF2.MSFT_lod;\r\n            MSFT_lod.enabled = !!this._model.configuration.loaderConfiguration.progressiveLoading;\r\n            MSFT_lod.maxLODsToLoad = this._model.configuration.loaderConfiguration.maxLODsToLoad || Number.MAX_VALUE;\r\n        }\r\n    }\r\n}"]}